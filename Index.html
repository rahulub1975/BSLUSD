<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSLUSD TradingView Chart</title>
   <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

// Load TradingView Lightweight Charts
const { createChart } = LightweightCharts;

// Create Chart Container
const chartContainer = document.createElement("div");
chartContainer.id = "bslusd_chart";
chartContainer.style.width = "100%";
chartContainer.style.height = "500px";
document.body.appendChild(chartContainer);

// Initialize Chart
const chart = createChart(chartContainer, {
    width: chartContainer.clientWidth,
    height: 500,
    layout: { backgroundColor: "#ffffff", textColor: "#000000" },
    grid: { vertLines: { color: "#e1e1e1" }, horzLines: { color: "#e1e1e1" } },
    timeScale: { timeVisible: true, secondsVisible: false }
});

// Create a CandleStick Series
const candleSeries = chart.addCandlestickSeries();

// Fetch Historical BSLUSD Data from GeckoTerminal API
async function fetchHistoricalData() {
    try {
        const response = await fetch("https://api.geckoterminal.com/api/v2/pairs/YOUR_PAIR_ID_HERE/ohlcv/?interval=1h");
        const data = await response.json();

        // Convert Data to TradingView Format
        const chartData = data.data.map(entry => ({
            time: Math.floor(new Date(entry.timestamp).getTime() / 1000), // Convert to UNIX timestamp
            open: parseFloat(entry.open),
            high: parseFloat(entry.high),
            low: parseFloat(entry.low),
            close: parseFloat(entry.close)
        }));

        candleSeries.setData(chartData);
    } catch (error) {
        console.error("Error fetching historical BSLUSD data:", error);
    }
}

// Fetch and Update Data Every 30 Minutes
fetchHistoricalData();
setInterval(fetchHistoricalData, 1800000);

    </script>
</body>
</html>
