<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSLUSD TradingView Chart</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

// Load TradingView Lightweight Charts
const { createChart } = LightweightCharts;

// Create Chart Container
const chartContainer = document.createElement("div");
chartContainer.id = "bslusd_chart";
chartContainer.style.width = "100%";
chartContainer.style.height = "500px";
document.body.appendChild(chartContainer);

// Initialize Chart
const chart = createChart(chartContainer, {
    width: chartContainer.clientWidth,
    height: 500,
    layout: { backgroundColor: "#ffffff", textColor: "#000000" },
    grid: { vertLines: { color: "#e1e1e1" }, horzLines: { color: "#e1e1e1" } },
    timeScale: { timeVisible: true, secondsVisible: false }
});

// Create a CandleStick Series
const candleSeries = chart.addCandlestickSeries();

// Fetch Historical Data from CoinGecko API
async function fetchHistoricalData() {
    try {
        const response = await fetch("https://api.coingecko.com/api/v3/coins/bitcoin/ohlc?vs_currency=usd&days=7");
        const data = await response.json();

        // Convert Data to TradingView Format
        const chartData = data.map(entry => ({
            time: entry[0] / 1000, // Convert to UNIX timestamp
            open: entry[1],
            high: entry[2],
            low: entry[3],
            close: entry[4]
        }));

        candleSeries.setData(chartData);
    } catch (error) {
        console.error("Error fetching historical data from CoinGecko:", error);
    }
}

// Fetch Data and Update Chart Every Hour
fetchHistoricalData();
setInterval(fetchHistoricalData, 3600000);

    </script>
</body>
</html>
