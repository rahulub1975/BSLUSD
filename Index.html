<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSLUSD TradingView Chart</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div id="bslusd_chart" style="width: 100%; height: 500px;"></div>
    <script>
        // Load TradingView Lightweight Charts
        const { createChart } = LightweightCharts;

        // Initialize Chart
        const chart = createChart(document.getElementById("bslusd_chart"), {
            width: 800,
            height: 500,
            layout: { backgroundColor: "#ffffff", textColor: "#000000" },
            grid: { vertLines: { color: "#e1e1e1" }, horzLines: { color: "#e1e1e1" } },
            timeScale: { timeVisible: true, secondsVisible: false }
        });

        // Create a CandleStick Series
        const candleSeries = chart.addCandlestickSeries();

        // Fetch BSLUSD Data from GeckoTerminal API
        async function fetchBSLUSDData() {
            try {
                const response = await fetch("https://api.geckoterminal.com/api/v2/simple/price?ids=bslusd&vs_currencies=usd");
                const data = await response.json();

                // Convert Data to TradingView Format
                const chartData = [{
                    time: Math.floor(new Date().getTime() / 1000),
                    open: data.bslusd.usd * 0.98,  // Simulating OHLC data
                    high: data.bslusd.usd * 1.02,
                    low: data.bslusd.usd * 0.97,
                    close: data.bslusd.usd
                }];

                candleSeries.setData(chartData);
            } catch (error) {
                console.error("Error fetching BSLUSD data:", error);
            }
        }

        // Fetch Data and Update Chart Every 30 Seconds
        fetchBSLUSDData();
        setInterval(fetchBSLUSDData, 30000);
    </script>
</body>
</html>
